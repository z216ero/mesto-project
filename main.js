(()=>{"use strict";var e;function t(e,t,n){!function(e){return e.some((function(e){return!e.validity.valid}))}(t)?(n.classList.remove(e.buttonInactive),n.disabled=!1):(n.classList.add(e.buttonInactive),n.disabled=!0)}function n(t){e=null,t.classList.remove("popup_opened"),t.removeEventListener("click",c),document.removeEventListener("keydown",r)}function o(t){e=t,t.classList.add("popup_opened"),t.addEventListener("click",c),document.addEventListener("keydown",r)}function r(t){"Escape"===t.code&&n(e)}function c(t){t.target.classList.contains("popup")&&n(e)}var u=document.querySelector("#element-template").content,p=document.querySelector(".elements"),l=document.querySelector(".photo-popup"),i=l.querySelector(".photo-popup__name"),a=l.querySelector(".photo-popup__photo");function s(e){p.prepend(e)}function d(e,t){var n=u.querySelector(".element").cloneNode(!0),r=n.querySelector(".element__photo");r.src=t,r.alt=e,n.querySelector(".element__name").textContent=e;var c=n.querySelector(".element__like-button");return n.querySelector(".element__delete-button").addEventListener("click",(function(){n.remove()})),c.addEventListener("click",(function(e){e.target.classList.toggle("element_liked")})),r.addEventListener("click",(function(){return function(e,t){i.textContent=e,a.src=t,a.alt=e,console.log("eed"),o(l)}(e,t)})),n}var m=document.querySelectorAll(".popup"),v=document.querySelector(".profile-popup"),f=document.querySelector(".card-popup"),y=document.querySelector(".profile__edit-button"),_=document.querySelector(".profile__add-button");m.forEach((function(e){e.querySelector(".popup__close-button").addEventListener("click",(function(){return n(e)}))}));var S,k=document.forms.profile,E=k.elements.name,q=k.elements.role,L=document.forms.card,b=L.elements.title,h=L.elements.src,x=document.querySelector(".profile__name"),g=document.querySelector(".profile__role");S={formSelector:".popup__form",inputSelector:".popup__input",popupSaveButtonSelector:".popup__save-button",popupFieldsetSelector:".popup__fieldset",popupInputTypeError:"popup__input_type_error",buttonInactive:"button_inactive",formInputErrorActive:"form__input-error_active"},Array.from(document.querySelectorAll(S.formSelector)).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),Array.from(e.querySelectorAll(S.popupFieldsetSelector)).forEach((function(e){!function(e,n){var o=Array.from(n.querySelectorAll(e.inputSelector)),r=n.querySelector(e.popupSaveButtonSelector);t(e,o,r),o.forEach((function(c){c.addEventListener("input",(function(){t(e,o,r),function(e,t,n){n.validity.valid?function(e,t,n){var o=t.querySelector(".".concat(n.id,"-error"));n.classList.remove(e.popupInputTypeError),o.classList.remove(e.formInputErrorActive),o.textContent=""}(e,t,n):function(e,t,n,o){var r=t.querySelector(".".concat(n.id,"-error"));n.classList.add(e.popupInputTypeError),r.textContent=o,r.classList.add(e.formInputErrorActive)}(e,t,n,n.validationMessage)}(e,n,c)}))}))}(S,e)}))})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){s(d(e.name,e.link))})),y.addEventListener("click",(function(){E.value=x.textContent,q.value=g.textContent,o(v)})),_.addEventListener("click",(function(){o(f)})),k.addEventListener("submit",(function(e){e.preventDefault(),x.textContent=E.value,g.textContent=q.value,n(v)})),L.addEventListener("submit",(function(e){e.preventDefault(),s(d(b.value,h.value)),n(f),L.reset();var t=L.querySelector(".popup__save-button");t.disabled=!0,t.classList.add("button_inactive")}))})();